<!DOCTYPE html>
<html>
	<style>
		* {
			margin: 0;
			padding: 0;
		}

		#mainForm {
			display: block;
			margin-top: 80px;
		}

		#inputForm {
    		display: none;
			margin-top: 160px;
		}

		#listForm {
			display: none;
			margin-top: 40px;
		}
		
		#showForm {
			display: none;
			margin-top: 40px;
		}
		
		#header {
			width: 100%;
			height: 60px;
			background: #2980b9;
			box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
		}
		
	</style>

    <head>
        <title>Hello World</title>
		<link rel='stylesheet' href='bootstrap.min.css'>
    </head>
    <body>
		<div id='header' style='color: white;' class='container'>
			<h3>Food Budget Suggestion</h3>
		</div>
        <div id='mainForm' class='container-fluid'>
            <center>
				<img src='logo-fbs.png' style='width: 200px'><br><br>
                <label for="fbs">Food Budget Suggestion</label><br><br>
				<label for="fbs">(Kanto version)</label><br><br>
                <Button onclick='nextMain()' class='btn btn-default' style='width: 25%'><center>Proceed</center></Button>
				<br><br>
                <Button onclick='about()' class='btn btn-default' style='width: 25%'><center>About</center></Button>
				<br><br>
                <Button onclick='developer()' class='btn btn-default' style='width: 25%'><center>Developers</center></Button>
            </center>
        </div>
        <div id='inputForm' class='container-fluid'>
		<center>
			<label for="">Enter Budget: </label>
			<br><br>
			<input type="text" id='budget' class='form-control' style='width: 50%;'><br>
			<button id='enter-budget' onclick='saveBudget()' class='btn btn-default' style='width: 25%;'>Enter</button>
			<button id='back' onclick='backMenu()' class='btn btn-default' style='width: 25%;'>Cancel</button>
		</center>
		</div>     
		<div id='listForm' class='container-fluid' style='width: 100%;'>
			<span id='post-budget'></SPAn>
			<div class='container-fluid'>
			
                        <label for="price">Initial Budget: <span id='initialBudget'></span></label>
                        <br><br>
                        <label for="price">Price: <span id='priceValue'></span></label>
                        <br><br>
                        <label for="price">Budget Left: <span id='budgetLeft'></span></label>
                        <br><br>
                        <button id='clear' onclick='clearShow()' class='btn btn-default'>Clear</button>
						<br><br>
						<button id='show' onclick='showList()' class='btn btn-default'>Show List</button>
						<br><br>
						<button id='back' onclick='backMenu()' class='btn btn-default'>Back to Menu</button>
						<br><br>
            </div>
			<center>
			<div>
                <table class="table table-hover" style='border: solid 0.5px black;'>
                    <thead>
                        <tr>
                            <th><center>Items</center></th>
                            <th><center>Unit price</center></th>
                        </tr>
                    </thead>
					<tbody id="table">        
					
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Buko</center></td>
                                        <td><center>5</center></td>
                                    </tr>
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Isaw</center></td>
                                        <td><center>5</center></td>
                                    </tr>
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Hotdog</center></td>
											<td><center>8</center></td>
                                    </tr>
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Chicken Skin</center></td>
                                        <td><center>5</center></td>
                                    </tr>
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Rice</center></td>
                                        <td><center>5</center></td>
                                    </tr >
                                    <tr  onclick='selectRow(this)'>
                                        <td><center>Siomai</center></td>
                                        <td><center>10</center></td>
                                    </tr>
                                    <tr  onclick='selectRow(this)'>
											<td><center>Manok</center></td>
                                        <td><center>20</center></td>
                                    </tr>
                                
                    </tbody>
                </table>                            
			</div>	
		</center>
		</div>   
		
		<div id='showForm' class='container-fluid'>
		<center>
			<h3>Selected Items</h3>
			<br><br>
			<p id='show-select'></p>
			<br><br>
			Total: <p id='show-total'></p>
			<br><br>
			<button onclick='backList()' class='btn btn-default'>Back</button>
			<button onclick='newList()' class='btn btn-default'>New</button>
		</center>
		</div>
		
		<script>
			
			var items = [];
            var input;
            var selectItems = [];
            var selectPrice = [], itemListName = [], itemListPrice = [], itemListIndex = [];
			var selectItemPrice = [], selectItemName = [], selectItemIndex = [] ;
            var tempBudget = 0;
            var selectItem = "";
            var budget = 0;
			var initialBudget;
            var temp = 0, total = 0, tempTotal = 0;    
			
			getJSONData();
			initialBudget = budget;
			
			function clearShow() {	
                document.getElementById('priceValue').innerText = "";
                document.getElementById('budgetLeft').innerText = "";
				temp = initialBudget;
				total = 0;			
				selectItemPrice = [], selectItemName = [], selectItemIndex = [] ;
            }
			
			function getJSONData(){
                var text = '{"items": [' +
                    '{"index": 0, "name":"Buko", "price":5},' +
                    '{"index": 1, "name":"Isaw", "price":5},' +
                    '{"index": 2, "name":"Hotdog", "price":8},' +
                    '{"index": 3, "name":"Chicken skin", "price":5},' +
                    '{"index": 4, "name":"Rice", "price":5},' +
                    '{"index": 5, "name":"Sioma", "price":10},' +
                    '{"index": 6, "name":"Manok", "price":20}]}';

                obj = JSON.parse(text);

                for(var i = 0 ; i < 7 ; i++) {
                    itemListIndex[i] = obj.items[i].index;
                    itemListName[i] = obj.items[i].name;
                    itemListPrice[i] = obj.items[i].price;
                }
            }
		
			function nextMain() {
				var mainForm = document.getElementById("mainForm");
                var inputForm = document.getElementById("inputForm");
                var listForm = document.getElementById("listForm");
				var showForm = document.getElementById("showForm");
				mainForm.style.display = "none";
                listForm.style.display = "none";
                inputForm.style.display = "block";
				showForm.style.display = "none";
            }

			function nextInput() {
				var mainForm = document.getElementById("mainForm");
                var inputForm = document.getElementById("inputForm");
                var listForm = document.getElementById("listForm");
				var showForm = document.getElementById("showForm");
				mainForm.style.display = "none";
                inputForm.style.display = "none";
                listForm.style.display = "block";
				showForm.style.display = "none";
			}
			
			function showList() {
			
				var mainForm = document.getElementById("mainForm");
                var inputForm = document.getElementById("inputForm");
                var listForm = document.getElementById("listForm");
				var showForm = document.getElementById("showForm");
				mainForm.style.display = "none";
                inputForm.style.display = "none";
                listForm.style.display = "none";
				showForm.style.display = "block";
				
				listSelect();
			}
			
			function listSelect(){
				var show = "";
				for(var i = 0 ; i < selectItemIndex.length ; i++) {
					show += selectItemName[i] + ' --------- ' + selectItemPrice[i] + '\n';
				}
				
				document.getElementById('show-select').innerText = show;
				document.getElementById('show-total').innerText = total;
				
			}
			
			function backList(){
				nextInput();
			}	
			
			function newList(){
				nextInput();
				clearShow();
			}
			
			function backMenu(){
				
				var empty = "";
				
					document.getElementById('budget').innerText = empty;
					var mainForm = document.getElementById("mainForm");
					var inputForm = document.getElementById("inputForm");
					var listForm = document.getElementById("listForm");
					var showForm = document.getElementById("showForm");
					mainForm.style.display = "block";
					listForm.style.display = "none";
					inputForm.style.display = "none";
					showForm.style.display = "none";
					clearShow();
			}

			function saveBudget() {
				nextInput();
				budget = parseInt(document.getElementById("budget").value);	
				
				if(!isNaN(budget)) {
					alert('Success!');
					document.getElementById('initialBudget').innerText = budget;
				}else {
					alert('Invalid!');
					nextMain();
				}
			}
			
			function selectRow(x) {
                console.log(itemListPrice[x.rowIndex-1]);
                total = total + itemListPrice[x.rowIndex-1];
                temp = budget - total;
                if(temp < -1) {
                    console.log("Tama na");
					tempTotal = total;
                }
                else if(selectPrice.push(itemListPrice[x.rowIndex-1])){
                    console.log('success kaayo!');
                    console.log('total ' + temp);
					
					selectItemIndex.push(itemListIndex[x.rowIndex-1]);
					selectItemName.push(itemListName[x.rowIndex-1]);
					selectItemPrice.push(itemListPrice[x.rowIndex-1]);
				
                    document.getElementById('priceValue').innerText = tempTotal;
                    document.getElementById('budgetLeft').innerText = temp;
                    document.getElementById('initialBudget').innerText = budget;
                }
            }
		</script>
    </body>
</html>

